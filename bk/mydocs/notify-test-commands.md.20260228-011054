# codex-notify ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒãƒ³ãƒ‰é›† ğŸ§ªğŸ””

`myscripts/codex-notify.sh` ã« â€œé€šçŸ¥ã‚¤ãƒ™ãƒ³ãƒˆ(JSON)â€ ã‚’æŠ•ã’ã¦ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ + åŠ¹æœéŸ³ãŒé³´ã‚‹ã‹ã‚’æ‰‹æ—©ãç¢ºèªã™ã‚‹ç”¨ã®ã‚³ãƒ”ãƒšé›†ã€‚

å‰æ:
- `mycodex/` ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆã§å®Ÿè¡Œã™ã‚‹ï¼ˆ`./myscripts/...` ãŒé€šã‚‹çŠ¶æ…‹ï¼‰
- é€šçŸ¥ãŒå‡ºãªã„å ´åˆã¯ `notify-send` ãŒå…¥ã£ã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯ï¼ˆç„¡ãã¦ã‚‚ stderr ã«ã¯å‡ºã‚‹ ğŸ‘ï¼‰

---

## 1) exec-approval-requestedï¼ˆã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã®æ‰¿èªå¾…ã¡ï¼‰âš ï¸

ã€Œã“ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã—ã¦ã„ã„ï¼Ÿã€ã£ã¦æ‰¿èªãŒå¿…è¦ãªã¨ãã®é€šçŸ¥ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚„ã¤ã€‚
é€šçŸ¥æœ¬æ–‡ã« `reason` ã¨ `command` ãŒå‡ºã‚‹ã®ãŒç›®å°ã€‚

```bash
./myscripts/codex-notify.sh \
  '{"type":"exec-approval-requested","command":["npm","install"],"cwd":"/home/sonecchi/PycharmProjects","reason":"needs network access"}'
```

---

## 2) apply-patch-approval-requestedï¼ˆãƒ‘ãƒƒãƒé©ç”¨ã®æ‰¿èªå¾…ã¡ï¼‰ğŸ§©

ã€Œapply_patch ã—ã¦ã„ã„ï¼Ÿã€ã¿ãŸã„ãª â€œæ›¸ãè¾¼ã¿æ‰¿èªå¾…ã¡â€ é€šçŸ¥ã®ãƒ†ã‚¹ãƒˆã€‚
`changes_count` ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKã€‚

```bash
./myscripts/codex-notify.sh \
  '{"type":"apply-patch-approval-requested","changes_count":3,"grant_root":"/home/sonecchi/PycharmProjects","reason":"write outside cwd"}'
```

---

## 3) agent-turn-completeï¼ˆã‚¿ãƒ¼ãƒ³å®Œäº†ï¼‰âœ…

ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒä¸€ä»•äº‹çµ‚ãˆãŸã¨ãã® â€œå®Œäº†é€šçŸ¥â€ ãƒ†ã‚¹ãƒˆã€‚
`last-assistant-message` ãŒãã®ã¾ã¾é€šçŸ¥æ–‡ã«ãªã‚‹ã€‚

```bash
./myscripts/codex-notify.sh \
  '{"type":"agent-turn-complete","turn-id":"test123","input-messages":["do something"],"last-assistant-message":"Done"}'
```

---

## å°ãƒ¯ã‚¶ï¼ˆä»»æ„ï¼‰ğŸ› ï¸

JSON ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã—ã¦æ¸¡ã—ãŸã„æ´¾ã¸ï¼š

```bash
cat payload.json | ./myscripts/codex-notify.sh -
```
